{% extends 'index.html' %}
{% block title %}see answers{% endblock title %}
{% block content %}

{% comment %} <!DOCTYPE html>
<html>

<head>
    <!--Import Google Icon Font-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>


    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <!-- Compiled and minified CSS -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">


    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>


    <nav>
        <!-- navbar content here  -->
    </nav>

    <ul id="slide-out" class="sidenav">
        <li>
            <div class="user-view">
                <div class="background">
                    <img
                        src="https://images.pexels.com/photos/12043242/pexels-photo-12043242.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1">
                </div>

                <a href="#name"><span class="white-text name">John Doe</span></a>
                <a href="#email"><span class="white-text email">jdandturk@gmail.com</span></a>
            </div>
        </li>
        <li>
            <a href="#!"><i class="material-icons">cloud</i>Create Polls

            </a></li>
        <li><a href="#!"><i class="material-icons">ac_unit</i> See Answers</a></li>


        <li>
            <div class="divider"></div>
        </li>
        <li><a class="subheader">Account</a></li>
        <li><a class="waves-effect" href="#!"> <i class="material-icons">account_circle</i> Logout</a></li>
    </ul>
    <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a>
 {% endcomment %}
 
<div class="container">

    <div class="row">
        <div class="col-12">
          <div class="card my-4">
            <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
              <div class="bg-gradient-primary shadow-primary border-radius-lg pt-4 pb-3">
                <h6 class="text-white text-capitalize ps-3">Answers</h6>
              </div>
            </div>
            <div class="card-body px-0 pb-2">
              <div class="table-responsive p-0">
                <table class="table align-items-center justify-content-center mb-0">
                  <thead>
                    <tr>
                      <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">S.no</th>
                      <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Questions</th>
                      <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Answers</th>
                      <th class="text-uppercase text-secondary text-xxs font-weight-bolder text-center opacity-7 ps-2">Link</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for question in  questions %}
                    <tr>
                      <td>
                        <div class="d-flex px-2">
                          <div class="my-auto">
                            <h6 class="mb-0 text-sm">{{forloop.counter}}</h6>
                          </div>
                        </div>
                        
                      </td>
                      <td>
                        <p class="text-sm font-weight-bold mb-0">{{question.question_text}}</p>
                      </td>
                      <td>
                        <a class="btn btn-secondary waves-effect waves-light btn" href="{% url 'answers' question.uid %}">See Answer</a>
                        <div id="modal-{{forloop.counter}}" class="modal">
                            <div class="modal-content">
                                <h4>Modal Header</h4>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Id</th>
                                            <th>Answer</th>
                                            <th>Percentage</th>
                                        </tr>
                                    </thead>
    
                                    <tbody>
                                        {% for answer in question.answer.all %}
                                        <tr>
                                            <td>{{forloop.counter}}</td>
                                            <td>{{answer.answer_text}}</td>
                                            <td>{{answer.calculate_percentage}}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
    
                            </div>
                            <div class="modal-footer">
                                <a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>
                            </div>
                        </div>
                      </td>
                      <td class="align-middle text-center">
                        <div class="d-flex align-items-center justify-content-center">
                            <a href="/question/{{question.uid}}" target="_blank" class=" btn btn-success waves-effect waves-light btn" >Open</a>
                          
                        </div>
                      </td>                      
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>





    {% comment %} <table class="container mt-5">
        <thead>
            <tr>
                <th>S.no</th>
                <th>Questions</th>
                <th>Answers</th>
                <th>Link</th>
            </tr>
        </thead>

        <tbody>
            {% for question in  questions %}
            <tr>
                <td>{{forloop.counter}}</td>
                <td>{{question.question_text}}</td>
                <td>
                    <a class="btn btn-primary waves-effect waves-light btn modal-trigger"  data-target="#modal-{{forloop.counter}}" href="#modal-{{forloop.counter}}">See ANswer</a>
                    <!-- Modal Structure -->
                    <div id="modal-{{forloop.counter}}" class="modal">
                        <div class="modal-content">
                            <h4>Modal Header</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Id</th>
                                        <th>Answer</th>
                                        <th>Percentage</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    {% for answer in question.answer.all %}
                                    <tr>
                                        <td>{{forloop.counter}}</td>
                                        <td>{{answer.answer_text}}</td>
                                        <td>{{answer.calculate_percentage}}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>

                        </div>
                        <div class="modal-footer">
                            <a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>
                        </div>
                    </div>
                </td>

                <td>

                    <a href="/question/{{question.uid}}" target="_blank" class="waves-effect waves-light btn" >Open</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table> {% endcomment %}
</div>

    {% block js %}

    


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('.modal');
            var instances = M.Modal.init(elems, options);
          });
        
          // Or with jQuery
        
          $(document).ready(function(){
            $('.modal').modal();
          });


        $("#rowAdder").click(function () {
            newRowAdd =
                '<div id="row"> <div class="input-group m-3">' +
                '<div class="input-group-prepend">' +
                '<button class="btn btn-primary" id="DeleteRow" type="button">' +
                '<i class="bi bi-trash"></i>  Delete</button> </div>' +
                '<input type="text" class="form-control m-input"> </div> </div>';

            $('#newinput').append(newRowAdd);
        });

        $("body").on("click", "#DeleteRow", function () {
            $(this).parents("#row").remove();
        })
    </script>

    {% endblock js %}
    {% endblock content %}

{% comment %} 
</body>

</html> {% endcomment %}